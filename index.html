<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>redux-mock-store documentation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/styles/default.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script async defer src="https://buttons.github.io/buttons.js"></script>
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">
        redux-mock-store
      </h1>
      <h2 class="project-tagline">A mock store for your testing your redux async action creators and middleware</h2>
      <a class="github-button" href="https://github.com/arnaudbenard/redux-mock-store" data-icon="octicon-star" data-style="mega" data-count-href="/arnaudbenard/redux-mock-store/stargazers" data-count-api="/repos/arnaudbenard/redux-mock-store#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star arnaudbenard/redux-mock-store on GitHub">Star</a>
    </section>

    <section class="main-content">
      <h3>
        Installation
      </h3>

      <p>You can install <code>redux-mock-store</code> via <code>npm</code>, we recommend installing the library as a dev dependency.</p>
      <pre><code class="nohighlight">npm install redux-mock-store --save-dev</code></pre>
      <h3>Usage</h3>
      <h4>Synchronous action</h4>
      <p>
        The simplest usecase is for the synchronous actions. In this example, we will test if the <code>addTodo</code> action returns the right payload. <code>redux-mock-store</code> saves all the dispatched actions inside the store instance. You can get all the action by calling <code>store.getActions()</code>. Finally, you can use any assertion library to test the payload.
      </p>
        <pre><code class="js">import configureStore from 'redux-mock-store'

const middlewares = []
const mockStore = configureStore(middlewares)

// You would import the action from your codebase in a real scenario
const addTodo = () => ({ type: 'ADD_TODO' })

it('should dispatch action', () => {

  // Initialize mockstore with empty state
  const initialState = {}
  const store = mockStore(initialState)

  // Dispatch the action
  store.dispatch(addTodo)

  // Test if your store dispatched the expected actions
  const actions = store.getActions()
  const expectedPayload = { type: 'ADD_TODO' }
  expect(actions).toEqual([expectedPayload])
})</code></pre>
      <h4>Asynchronous action</h4>
      <p>
        A common usecase for an asynchronous action is a HTTP request to a server. In order to test those types of actions, you will need to call <code>store.getActions()</code> at the end of the request.
      </p>
        <pre><code class="js">import configureStore from 'redux-mock-store'
import thunk from 'redux-thunk'

const middlewares = [thunk] // add your middlewares like `redux-thunk`

// You would import the action from your codebase in a real scenario
function success() {
  return {
    type: 'FETCH_DATA_SUCCESS'
  }
}

function fetchData () {
  return dispatch => {
    return fetch('/users.json') // Some async action with promise
      .then(() => dispatch(success()))
  };
}

it('should execute fetch data', () => {
  const store = mockStore({})

  // Return the promise
  return store.dispatch(fetchData())
    .then(() => {
      const actions = store.getActions()
      expect(actions[0]).toEqual(success())
    })
})</code></pre>
<h3>API</h3>
  <pre><code>configureStore(middlewares?: Array) => mockStore: Function</code></pre>
  <p>Configure mock store by applying the middlewares</p>
  <pre><code>mockStore(getState?: Object,Function) => store: Function</code></pre>
  <p>Returns an instance of the configured mock store. If you want to reset your store after every test, you should call this function.</p>
  <pre><code>store.dispatch(action) => action</code></pre>
  <p>Dispatches an action through the mock store. The action will be stored in an array inside the instance and executed.</p>
  <pre><code>store.getState() => state: Object</code></pre>
  <p>Returns the state of the mock store</p>
  <pre><code>store.getActions() => actions: Array</code></pre>
  <p>Returns the actions of the mock store</p>
  <pre><code>store.clearActions()</code></pre>
  <p>Clears the stored actions</p>
  <pre><code>store.subscribe(callback: Function) => unsubscribe: Function</code></pre>
  <p>Subscribe to the store</p>
  <pre><code>store.replaceReducer(nextReducer: Function)</code></pre>
  <p>Follows the redux API</p>


      <h3>License</h3>
      <p>MIT</p>
      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/arnaudbenard/redux-mock-store">redux-mock-store</a> is maintained by <a href="https://github.com/arnaudbenard">arnaudbenard</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-86124593-1', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
